Change Log for OpenXava project
===============================

- Support for database with schema support but that they not allow to use schema in data manipulation. This allows use schemas in Hypersonic.
- Editor for valid-value and Java 5 Enum is defined in default-editor.xml and can be defined in editors.xml/editores.xml. Now it's possible to customize the valid-values/enum editor.

- Fix: ClassCastException when searching with MapFacade using BigDecimal as values for integer properties.
- Fix: Stereotype IMAGES_GALLERY/GALERIA_IMAGENES shows a gap between first and second image if you have more than seven.
- New class ArrayOneRowResultSetAdapter for reading a object array as JDBC ResultSet.

OpenXava 2.1.1 (2007-3-2)
-------------------------
- OpenXava number version is logged.
- Fix: Composite key with an int or long and NUMERIC in database fails searching in detail mode.
- New methods setYear, setMonth and setDay added to Dates class.
- Stereotype IMAGES_GALLERY/GALERIA_IMAGENES is shown nicely in Liferay Portal.
- New method getAllMetaActionsIterator() added to ModuleManager to avoid using org.apache.commons.collections.IteratorUtils inside JSP (Eclipse WTP does not like it).
- Ant target 'compile' in OpenXava/build.xml is refined in order to work fine even if it is the first ant target to be executed when a project is recently created.
- Fix: Focus is lost inside Liferay when a request is done.
- Fix: Avoid browser cache of PDF OpenXava generated documents.
- Using key properties of parent model in a 'from' attribute from an aggregate works. That is, to use from="invoice.year" from a InvoiceDetail aggregate is allowed.

OpenXava 2.1 (2007-2-12)
------------------------
MAIN FEATURES
- Full support for EJB3 JPA as persistence engine.
- Full support for Liferay portal.

XML SYNTAX
- Session objects declared in controllers.xml now can have global scope. A new scope attribute is added to <object/> element.
- Attribute remove-selected-action added to <collection-view/> in order to define a custom action for removing selected elements in a collection.

JAVA API
- View.getRemoveSelectedInCollectionAction() renamed to View.getRemoveSelectedCollectionElementsAction()
- Protected method removeSelected added to RemoveSelectedInCollectionAction in order to facilitate the refiniment of the action.

MISC
- deployEJB (in OpenXava/build.xml) copy all hibernate jars to the ear in order to use Hibernate inside EJB2.
- New ant target in OpenXava/build.xml 'generatePortlets' that generates a war file in portlet format but it does not copy it to deploy directory.
- Logging of i18n problems is now low (only short warning messages). No exception is shown now.
- Removed commit from list.jsp. Now in order to work with WebSphere you need to configure your hibernate.cfg.xml. Look at OpenXavaTest/hibernate.cfg.xml adn OpenXavaTest/websphere-as400.properties to see an example.
- Hibernate Entity Manager and Hibernate Annotations updated to 3.2.1
- DateTimeFormatter improved for Polish locale.
- New property javaLoggingLevel available in xava.properties to specify the log level for the OX applications.
- No cache is used for OX portlets. expiration-cache is 0 in portlet.xml generated by OpenXava.
- Polish translation for labels and messages.
- wtpBuild ant target is dropped from OX. You can use 'rebuild' ant target instead.
- New demo project ProductSale added.
- Style of frame for collection elements supports Liferay.
- The OX jsp are always updated in OX applications, in this way when a new OX version is updated the OX code in applications is update without problems
- Removed incorrect stack trace about JPA when a datasource cannot be obtained, even if the application does not use JPA the trace was shown.
- The properties in the files inside WEB-INF/classes have always preference, independently of classloader configuration of application server.
- Choosing the encoding for portlet.xml is posible using portlet.encoding property in build.xml.

FIXES
- Fix: Maps.treeToPlains did not work with more than 2 levels.
- Fix: Action for references (search, create, modifying) did not support more than 2 nested level.
- Fix: javaLoggingLevel property in xava.properties had no effect inside junit test. Also now trim() is done before parse its value.
- Fix: Typing @ in a windows using a view with sections changes the current tab. This may affect to all AltGr characters.
- Fix: In view: Layout a reference besides to the next reference does not work (the next one was placed below).
- Fix: Java 5 was required for portlet generation. Now it works (again) with Java 1.4
- Fix: Calendar for date editor does not work in a module called from another module.
- Fix: Portlets does not work in WebSphere Portal 5.1
- Fix: HtmlPortlet does not recognize the language correctly.
- Fix: Searching on focus lost in references with hidden key fails in the second attempt.
- Fix: Image for editing in HTML_TEXT stereotype was missing.
- Fix: MetaValidators.findFromParent print a NullPointer stacktrace if the type is an interface.
- Fix: ModuleTestBase.assertListNotEmpty() works well, before one line list was considered as empty.


OpenXava 2.0.4 (2006-12-19)
---------------------------
UI BEHAVIOUR
- More coherent behaviour for IMAGES_GALLERY stereotype. Now the images are always added to the gallery, although the save button in main entity is not pushed.
- Searching in detail model for any displayed field includes references (before only it worked with plain properties)
- Link for modify references available to users.
- In list mode java.sql.Timestamp allows filter by year, month and year/month.
- Informative message on adding new image to a Gallery.
- Seaching by year/month in data types is allowed in list mode.
- Images gallery show identification data about the object that own the images
- Top button bar shows icon and bottom button bar shows buttons, without redundancy
- java.sql.Timestamp can be used for filtering in list mode using plain dates.

XML SYNTAX
- New attribute modify (to disable/enable 'modify link') in <reference-view/>
- New attribute modify-reference (to disable/enable 'modify link') in <collection-view/>
- New attribute scale (useful for creating a more accurate hiberante mapping) in <property/> (by Radoslaw)
- New attribute aligned-by-columns for <group/> and <section/> in views. It allows layout the members by columns, as in a table.

JAVA API
- ModuleTestBase.getProperty now is public and static in order to access to xava-junit.property from any place.
- New method ModuleTestBase.setLocale to change the locale of the client at runtime.
- Strings.change allows sending null as string.
- View class has this 3 new methods: putObject(), getObject() and removeObject() that allow to associated arbitrary objects to a view.
- Method Dates.cloneWith2359() added. To clone a date but with time 23:59:59 999
- INCOMPATIBITY: Dates.clonWithoutTime() renamed to Dates.cloneWithoutTime()

MISC
- Style works fine in Liferay, adapting well to all look & feels.
- Updated to Hibernate 3.2.1
- Liferay style integration improved.
- XavaSuite works at 100% agains Liferay 4.1.3.
- Logging using apache commons loggins instead of System.out/System.err/printStackTrace.
- Default value (3000) for HTML_TEST/TEXTO_HTML stereotype.
- StringArrayBytesConverter supports Blob as column type in DB.
- StringTimeFormatter (used by TIME/HORA stereotype) format using 5 digits.
- Referencing in 'from' attribute of a calculator inside an aggregate to properties of the parent model are allowed (look at section 3.8.4 of reference guide)
- ConcatCaculator now admits until 5 strings/ints
- MetaProperty.parse converts empty string in null (instead of 0) for all value of type Number. This can produce some little INCOMPATIBILITIES (now blanks are shown where before 0 was shown).
- It's possible to create a folder named 'public' inside our OX project then all JSP inside it will be always public and accessibles even in a Portal.
- Date format and parse are done depending on browser locale.
- Ant target 'redeployPorlets' added to OpenXava/build.xml and used from all OX projects.
- java.sql.Time are parsed using 24 hours format in all locales by default.
- Some correction in translations for object_not_found.
- ModuleTestBase.setValue(String model, String name, String value) throw onchange events as the
setValue(String name, value) does.
- JasperReport version returns to 1.1.1, because 1.2 has problems in some J2EE/portals server (WAS 5.1 + WPS 5.1 in an IBM iSeries)
- The ant target 'clearGeneratedCode' does not fail although the gen-src (used only in EJB) does not exist.
- portlet.xml is generated using UTF-8.
- NotNullDateConverter now supports java.util.Date.
- java.sql.Time supported (including JasperReport generation).
- TimeFormatter renamed to StringTimeFormatter.
- IBM WebSphere Portal 6.0 tested and supported
- IChangeModeAction allows to change to PREVIOUS_MODE, in addition to DETAIL and LIST.
- Using <env-var name="XAVA_LIST_ACTION" value=""/> on defining a module in application.xml the detail action in each row is missing.
- The buttonBarOnTop and buttonBarOnBottom properties of xava.properties are not longer used

FIXES
- Fix: htmlEditor does not work inside portal
- Fix: "order by" links in list mode are displayed ugly in JetSpeed2.
- Fix: String (or any other type) for property type and byte [] for cmp-type supported in Hibernate.
- Fix: Stacktrace is shown in trace when a label is not in i18n files.
- Fix: default value calculators do not work in collection of entities displayed as aggregates
- Fix: Calculated properties inside a section that depend on a property on other section is not recalculated well.
- Fix: util.Server restore XHibernate.isCmt state correctly. In order to use Server from calcultors when you use hibernate + ejb.
- Fix: Javascript calendar for date fails in Liferay.
- Fix: Actions of references do not work inside nested sections.
- Fix: Filtering in list by java.sql.Time does not work.
- Fix: Filtering in list mode using other operators than '=' fails using Timestamp.
- Fix: Focus does not work well inside a portal.
- Fix: A blank line at first of the module using Internet Explorer.
- Fix: Exporting to excel does not work inside JetSpeed 2.
- Fix: On creating a new object from reference, when we are creating an object from a reference (more than 1 nested level) the reference in the original view is not filled.
- Fix: Parsing numbers in Polish fails if the number is > 1000
- Fix: Searching an object with a single reference (with a single column) as key fails in hibernate.
- Fix: createWebsphereEar ant target broken
- Fix: <set/> with 'from' attribute does not work in <remove-validator/>
- Fix: On removing an element from a collection using check box the dependent data was not updated.
- Fix: If you try to filter pressing return (without click in filter) when searching a reference a error message was displayed.
- Fix: When customize a list searching references always return to the main list mode of module.
- Fix: When a new object is created from reference UI (with + icon), and it has a autogenerated hidden key, the reference is not filled with the new created object.
- Fix: Defining a calculated property that mix <set/>s with 'value' and 'from' fails
- Fix: Fails in tab when ordering by primary key in Informix


OpenXava 2.0.3 (2006-10-02)
---------------------------
UI BEHAVIOUR
- It's possible to remove several rows from collection at once, using a checkbox + action
- When you navigate or search to a new object all collections closes the detail view. In this way a lot of incorrect data display problems are removed.

XML SYNTAX
- Attribute 'maximum' (for validating maximum item count) allowed in <collection /> element.
- order in finder supports using a property of a reference inside an aggregate (address.state.name for example) for Hibernate and JPA.
- <action/> inside <members>, <property-view/> or <reference-view/> have the attribute 'always-enabled', when this attribute is true the action is always present, even if the view, property or reference are not editable.
- <action /> allowed inside members(groups and section) of view. In order to put an arbitrary action inside a view.

JAVA API
- The method getJRXML of JasperReportBaseAction admit full file path for specifying a resource of file system, before only resources from classpath could be readed.
- View.setValue throws exception if member to update is not shown in view
- Added method treeToPlain to Maps utility class.
- Added method assertNoMessage to ModuleTestBase
- Maps.putValueFromQualifiedName for put a value in a tree format map using a qualified name.
- MapFacade.addCollectionElement method added and use from standard OpenXava actions.

MISC
- New stereotype: HTML_TEXT/TEXTO_HTML.
- Chapter 2 of reference guide uses 'updateSchema' for creating database.
- JPA code in POJOs only is generated if JPA persistence provider is set, or the property 'jpaCodeInPOJOs' in xava.properties is set to true. In this way POJOs can be compiled using a java 1.4 compiler.
- Default validators for type or stereotype are supported. They can be defined in validators.xml.
- If component name does not match with xml file name a meaningful message is produced
- <xava:descriptionsList/> JSP taglib added.
- <xava:message/> JSP taglib added.
- Calculated properties with IModelCalculator or IEntityCalculator are recalculated in view when some dependent value changed and an POJO (not EJB) populated with the current view data is injected in calculator before calculation.
- Custom JSP are allowed in root folder.
- It's possible to overwrite standard messages of OpenXava.
- XavaResources.properties dropped from OpenXava. All its content is moved to Messages.properties.
- Code generation for EJB2 exclude some finder cases only supported in Hibernate/EJB3
- Added 'as-aggregate' to <reference-view/> to allow entity references behave as aggregate references.
- It's possible override for our application a defaut controller of OpenXava (Collection, References, Typical, etc).
- OpenXava/xava/controllers.xml is renamed to OpenXava/xava/default-controllers.xml.

FIXES
- Fix: checkbox of rows in collection is not shown when collections are not editable
- Fix: SaveAction with resetAfter=false clear the data of references
- Fix: as-aggregate for in <reference-view/> does not work if the key of reference is autogenerated.
- Fix: View.setValueNotifying and View.setValuesExecutingOnChangeActions does not execute the same action more than once.
- Fix: Now CRUD.searchByViewKey does not throw on-change event for key in references, and CRUD.searchExecutingOnChange lanza on-change event for key in references. Now works as reference guide explains.
- Fix: OnChange action associated to a view used for create a new reference crash if add error or messages
- Fix: Editable mode of collection of entities inside an section fails.
- Fix: assertListRowCount(0) works fine in junit tests
- Fix: View.setEditable from inside a XAVA_SEARCH_ACTION in list mode does not affect to collections with <collection-view/>
- Fix: validator in aggregate that references to its parent of which key is single crash.
- Fix: If the user removing a column from tab and after he filter by a aggregate value then fails: Filter is not done, and the list is not well displayed

OpenXava 2.0.2 (2006-08-01)
---------------------------
- On creating a new object from a reference the reference view is filled automatically with the just created object.
- Added 'as-aggregate' to <collection-view/> to allow entity collections behave as aggregate collections.
- Added exportSchema and updateSchema to OpenXava/build.xml (see example in MySchool/MiEscuela build.xml)
- It's possible to refine the default behavior of a collection-view with new new-action, save-action, hide-detail-action and remove-action elements in collection-view
- add/removeListAction and add/removeDetailAction added to view. This allow add/remove programmatically actions to a collection view.
- hiddenDetail action of Collection controller in controllers.xml is renamed to hideDetail.
- New stereotype ZEROS_FILLED/RELLENADO_CON_CEROS
- Feedback to the user of standard action are improved, specially those of collection
- Searching a reference using radio button instead of checkbox, because only an item can be selected.
- Allows spaces at end of persistenceProviderClass property value in xava.propeties.
- In upload forms (multiplar) any number of actions is allowed.
- In IMAGES_GALLERY stereotype there is a cancel action in the form for upload image.
- Added explicit support for identity (auto-increment) database columns by means of the new IdentityCalculator.
- IPropertyAction added, to allow inject property name and view to an action defined in an <property-view/>
- SearchByViewKeyAction has new protected methods for refining its behaviour easily.
- list.jsp admit the parameter singleSelection to indicate if the list has to use chechbox or radio button.
- CreateNewFromReferenceAction and SaveNewAction now have a property 'referenceSubview' (of View type) that has to be injected in controllers.xml. If you have some custom action that extends them remember modify your controllers.xml
- The order of elements in entity/aggregate are more flexible.
- Converters (defined in converters.xml or MyComponent.xml) are applied for not generated code too. In this case conversion is only used for list mode, and the programmer is responsible to include the conversion in get/set code.
- Some adaptation a oracle syntax: Inner joins for tab works fine with Oracle (" as " dropped).
 OpenXava is refined in order to avoid this jetspeed flaw
- All text editors are limited to 100 displayed charecters as maximum. You can customize it for you applicaction using maxSizeForTextEditor in xava.properties.
- The textEditor.jsp editor has a new parameter 'maxSize' that is assigned to the 'size' attribute of html <input /> element. You can use it in your own steroetypes.
- workspace.dir in openxava.properties (or equivalent) is ignore by OpenXava. Therefore, from now on you can rename the folder of your workspace without worrying about to change your openxava.properties.
- Key with 0 as value works in searching
- The ERROR messages on deleting the last object are not shown if removal is done correctly.
- xava-junit.properties support the 'application' property to indicate the default value for
	the application to all the junit test the project.
- Image editor does not show the broken image when there is no image.
- Labels.get and Labels.exists methods do not fail, instead returns a default value.
- XavaResource.getString never fails. This is for avoid some bug in jetspeed2 request implementations.
- Fix: descriptions-list with order and without condition fails
- Fix: collections of references to entities are full editable inside sections.
- Fix: Sterotype IMAGES_GALLERY crash when the property is not in i18n files.
- Fix: request.getLocale() throws NullPointerException in some circumstance inside Jetspeed2.
- Fix: actions which description contains ' fails
- Fix: Numeric text fields are aligned to right (maybe it was broken in some point)
- Fix: Bug in CollectionBaseAction.getObjects()
- Fix: collection of aggregates inside group inside section fails
- Fix: Searching in detail fails with boolean and properties with converters
- Fix: Searching in detail fails when more than one match to the searching

OpenXava 2.0.1 (2006-06-29)
---------------------------
- Support for EJB3 JPA: 100% supported, but still in beta stage until 2.1.
	> EntityManager can be used inside your own actions.
	> JPAPersistenceManager available and 100% tested
	> XPersistence class
- keystroke supported for actions (in controllers.xml)
- IHibernateIdGeneratorCalculator added, to customize the .hbm.xml generated code for id generators.
- Search action in detail mode supports searching by any field or fields. Before only 'by primary key' was supported
- Support for sequence id generator for Hibernate/EJB3.
- Method XSystem.isJava5OrBetter() added.
- Formatter is not required for stereotype that uses 'descriptionsEditor.jsp', including the case of multiple key with references.
- Attributes 'editable' and 'throwPropertyChanged' added to <xava:editor /> taglib
- Searching references of which key is hidden can be done using the first displayed field of reference.
- PropertiesManager.executeGet and executeGets support qualified properties.
- New method MapFacade.getValuesByAnyProperty to search by any property (not only the key)
- Nes method Is.empty to ascertain if the argument (an object) is null, empty string or 0.
- Actions with confirmation show a meaningful confirmation message (from description of action)
- Keystrokes (control-1 to control-9) availables for section change.
- Controls duplicated form submit: In this way last action is not repeated accessing portlets in WebSphere Portal.
- Updated to httpunit 1.6.2
- Grammatical corrections to reference guide
- Fix: In Hibernate int key with NUMERIC in db fails.
- Qualified properties allowed in <xava:editor /> taglib
- <action/> element added to <reference-view/> in <view>. Works as in case of <property-view/>
- Eclipse validation droped from OpenXava project, in order to avoid errors in folder xdoclet

OpenXava 2.0 (2006-05-22)
-------------------------
- Model layer generated using POJOs.
- Persistence managed by Hibernate.
- Works with a simple Tomcat.

