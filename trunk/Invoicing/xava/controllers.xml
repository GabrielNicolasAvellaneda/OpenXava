<?xml version = "1.0" encoding = "ISO-8859-1"?>

<!DOCTYPE controllers SYSTEM "dtds/controllers.dtd">

<controllers>
 
	<env-var name="XAVA_SEARCH_ACTION" value="Invoicing.searchExcludingDeleted"/>	
	<object name="invoicing_currentInvoiceKey" class="java.util.Map" scope="global"/>

	<controller name="Invoicing">
	
		<extends controller="Typical"/>
	
		<action name="delete" mode="detail" confirm="true"
			class="org.openxava.invoicing.actions.InvoicingDeleteAction" 
			image="images/delete.gif"
			keystroke="Control D">
			<use-object name="xava_view"/>						
		</action>		
		 
		<action name="searchExcludingDeleted" 
			hidden="true"
			class="org.openxava.invoicing.actions.SearchExcludingDeletedAction">
			<use-object name="xava_view"/>						
		</action>		
		
		<action name="deleteSelected" mode="list" confirm="true"
			class="org.openxava.invoicing.actions.InvoicingDeleteSelectedAction"
			keystroke="Control D">
		</action>
		
	</controller> 
	
	<controller name="Trash">
		<action name="restore" mode="list"
			class="org.openxava.invoicing.actions.InvoicingDeleteSelectedAction">
			<set property="restore" value="true"/>
		</action>
	</controller>
	
	<controller name="Order">
		<extends controller="Invoicing"/>
		
		<action name="createInvoice" mode="detail"
			class="org.openxava.invoicing.actions.CreateInvoiceFromOrderAction">
			<use-object name="xava_view"/>
		</action>
			
		<action name="createInvoiceFromSelectedOrders" mode="list"
			class="org.openxava.invoicing.actions.CreateInvoiceFromSelectedOrdersAction">
			<use-object name="invoicing_currentInvoiceKey"/>
		</action>	
				
		<action name="searchInvoice" 
			hidden="true"
			image="images/search.gif"
			class="org.openxava.invoicing.actions.SearchInvoiceFromOrderAction">
			<use-object name="xava_view"/>
			<use-object name="xava_referenceSubview"/>
			<use-object name="xava_tab"/>
			<use-object name="xava_currentReferenceLabel"/>
		</action>		
					
	</controller>
	
	<controller name="CurrentInvoiceEdition">
	
		<action name="load" 			 
			class="org.openxava.invoicing.actions.LoadCurrentInvoiceAction"
			hidden="true"			
			on-init="true">			
			<use-object name="xava_view"/>
			<use-object name="invoicing_currentInvoiceKey"/>
		</action>	
	
	
		<action name="save" 
			class="org.openxava.invoicing.actions.SaveInvoiceAction"			
			keystroke="Control S">			
			<use-object name="xava_view"/>
		</action>	
	
		<action name="return" 
			class="org.openxava.actions.ReturnPreviousModuleAction"/>
			
	</controller>
	
	<controller name="Invoice">
		<extends controller="Invoicing"/>		
				
		<action name="addOrders" 
			image="images/create_new.gif"
			hidden="true"
			class="org.openxava.invoicing.actions.GoAddOrdersToInvoiceAction">			
			<use-object name="xava_tab"/>
			<use-object name="xava_currentCollectionLabel"/>
			<use-object name="xava_collectionViewObject"/>
			<use-object name="xava_view"/>
		</action>
		
	</controller>
	
	<controller name="AddOrdersToInvoice">
		<extends controller="AddToCollection"/>
		<action name="add" 
			class="org.openxava.invoicing.actions.AddOrdersToInvoiceAction">
			<use-object name="xava_view"/>			
			<use-object name="xava_tab"/>			
			<use-object name="xava_collectionViewObject" action-property="viewObject"/>
			<use-object name="xava_currentCollectionLabel"/>			
		</action>
	</controller>
	
		
</controllers>