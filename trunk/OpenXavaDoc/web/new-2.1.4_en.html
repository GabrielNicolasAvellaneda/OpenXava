These are some of the new features in OpenXava 2.1.4:<br>
<ul>
  <li><a href="#Actions_for_list_mode_can_be_used_in">Actions for list
mode can be used in collections<br>
    </a></li>
  <li><a href="#Default_list_action_for_collections_">Default list
action for collections</a></li>
  <li><a href="#New_actions_in_collections_for_junit">New actions in
collections</a></li>
</ul>
<h4><a name="Actions_for_list_mode_can_be_used_in"></a>Actions for list
mode can be used in collections</h4>
Actions for list mode, that is actions that use the object <span
 style="font-family: monospace;">xava_tab</span> now can be write in
this way:<br>
<pre>public class DeselectRowsAction extends TabBaseAction {</pre>
<pre><br>&nbsp;&nbsp;&nbsp; public void execute() throws Exception {</pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; getTab().deselectAll();</pre>
<pre>&nbsp;&nbsp;&nbsp; }</pre>
<pre><br>}</pre>
As you see the action extends from <span
 style="font-family: monospace;">TabBaseAction</span>.<br>
In addition, you don't need to inject the <span
 style="font-family: monospace;">xava_tab</span> object in
controllers.xml, that is you may declare your action as following:<br>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;action name="deselectRows"</pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; class="org.openxava.actions.DeselectRowsAction"</pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; hidden="true"</pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; mode="list"&gt;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;/action&gt;&nbsp;&nbsp;&nbsp; </pre>
The <span style="font-family: monospace;">&lt;use-object
name="xava_test"/&gt;</span> is not present.<br>
<br>
In this way your action will work for list mode <span
 style="font-weight: bold;">and for collections</span>, because since
v2.1.4 list actions that used <span style="font-family: monospace;">Tab</span>
can be applied to collections as <span style="font-family: monospace;">&lt;list-action/&gt;</span>.<br>
<h4><a name="Default_list_action_for_collections_"></a>Default list
action for collections </h4>
<p>If you want to add some custom list actions to all the collection
of your application you can do it creating a controller called
<code class="c&oacute;digo-western">DefaultListActionsForCollections</code>
in your own <i><span style=""><span
 style="background: transparent none repeat scroll 0% 50%; -moz-background-clip: initial; -moz-background-origin: initial; -moz-background-inline-policy: initial;">xava/controller.xml</span></span></i>
file as following:</p>
<pre>&lt;controller name="DefaultListActionsForCollections"&gt;<br><br>&nbsp;&nbsp;&nbsp; &lt;extends controller="Print"/&gt;<br><br>&nbsp;&nbsp;&nbsp; &lt;action name="exportAsXML"<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; class="org.openxava.test.actions.ExportAsXMLAction"&gt;<br><br>&nbsp;&nbsp;&nbsp; &lt;/action&gt;<br><br>&lt;/controller&gt;</pre>
<p>In this way all the collections will have the actions of <code
 class="c&oacute;digo-western">Print</code>
controller (for export to Excel and generate PDF report) and your own
<code class="c&oacute;digo-western">ExportAsXMLAction</code>. This
has the same effect of <code class="c&oacute;digo-western">&lt;list-action/&gt;</code>
element but it apply to all collections at once.</p>
<h4><a name="New_actions_in_collections_for_junit"></a>New actions in
collections (for junit test)</h4>
Now all the actions of list mode are also available in the collections.
The user can filter, order, paging, etc in any collection. Therefore
you can also test these actions in your junit test. It's easy.<br>
For example, if you want to test the action for ordering, you can do
the following in your junit test:<br>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // Order by column</pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; execute("List.orderBy", "property=number,<span
 style="font-weight: bold; color: rgb(51, 102, 255);">collection=customers</span>");</pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; assertValueInCollection("customers", 0, "number", "1");</pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; assertValueInCollection("customers", 1, "number", "2");</pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; execute("List.orderBy", "property=number,<span
 style="font-weight: bold; color: rgb(51, 102, 255);">collection=customers</span>");</pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; assertValueInCollection("customers", 0, "number", "2");</pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; assertValueInCollection("customers", 1, "number", "1");</pre>
As you see, you only need to declare the argument <span
 style="font-family: monospace;">collection</span>.<br>
If you want to filter, you can write a test code as this one:<br>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; // Filter&nbsp;</pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; String [] condition = { "1" };</pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; setConditionValues(<span
 style="font-weight: bold; color: rgb(51, 102, 255);">"customers"</span>, condition);</pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; execute("List.filter", "collection=customers"); </pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; assertCollectionRowCount("customers", 1);</pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; assertValueInCollection("customers", 0, "number", "1");</pre>
<pre>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; assertValueInCollection("customers", 0, "name", "Javi");</pre>
As you see, the method <span style="font-family: monospace;">setConditionValues</span>
allows you to indicate the collection name as first argument.<br>
<br>
