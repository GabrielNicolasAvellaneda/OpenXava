This is a guide to configure WTP in order to execute and debug OpenXava
applications inside Eclipse.<br>
Eclipse Web Tool Platform (<a href="http://www.eclipse.org/webtools/">WTP</a>)
help you develop J2EE application with Eclipse.<br>
In the case of OpenXava you can use WTP to start Tomcat (or your
favorite Application Server) inside Eclipse, thus you can see the
effects of the changes without redeploy and also you can debug your
code.<br>
All OpenXava applications created using OpenXavaTemplate are WTP
compatible.<br>
This document guide you to use WTP for executing the <span
 style="font-style: italic;">MySchool</span> demo application that
comes with OpenXava. <br>
<b><i>Important!</i></b> Before starting with this tutorial is
important that you <b><i>Refresh</i></b> all projects in your <b><i>workspace</i></b>
in Eclipse
(select all projects and press F5).<br>
Follow the next steps:<br>
<ul>
  <li><a href="#Add_Tomcat_to_your_Eclipse">Add Tomcat
to your Eclipse.</a></li>
  <li><a href="#Create_a_Tomcat_server">Create a Tomcat
server.</a></li>
  <li><a href="#Define_your_data_sources">Define your
data sources.</a></li>
  <li><a href="#Start_the_server_and_test_your">Start
the server and
test your application.</a></li>
  <li><a href="#Developing_using_WTP">Developing using
WTP.</a></li>
</ul>
<h4><a name="Add_Tomcat_to_your_Eclipse"></a>Add Tomcat to your Eclipse</h4>
<ul>
  <li>Go to <span style="font-style: italic;">Windows &gt; Preferences
&gt; Server &gt; Installed
Runtimes</span>.</li>
  <li>Click on&nbsp;<span style="font-style: italic;">Add</span>.</li>
  <li>Choose <span style="font-style: italic;">Apache &gt; Apache
Tomcat 5.5</span>.</li>
  <li>Click on&nbsp;<span style="font-style: italic;">Next</span>.</li>
  <li>Fill:&nbsp;</li>
  <ul>
    <li><span style="font-style: italic;">Name</span>: <span
 style="font-family: monospace;">Apache Tomcat v5.5</span></li>
    <li><span style="font-style: italic;">Tomcat installation directory</span>:
The path of your Tomcat (you can use the OpenXava Tomcat in <span
 style="font-family: monospace;">openxava-2.1.x/portal</span>
folder)</li>
    <li><span style="font-style: italic;">JRE</span>: Choose a Java 5.</li>
  </ul>
  <li>Click on&nbsp;<span style="font-style: italic;">Finish</span>.</li>
  <li>Click on&nbsp;<span style="font-style: italic;">OK</span> in <span
 style="font-style: italic;">Preferences Dialog</span> to close it.</li>
</ul>
<span style="font-style: italic;"><span style="font-weight: bold;">Warning!</span>
</span>If &nbsp;you use a Tomcat other than one that comes with
OpenXava
distribution then you must copy <span
 style="font-weight: bold; font-style: italic;">jta.jar </span>and <span
 style="font-weight: bold; font-style: italic;">ejb.jar</span> from
openxava-2.1.x/portal/common/lib to the folder <span
 style="font-weight: bold; font-style: italic;">common/lib</span> of
your Tomcat.
<h4><a name="Create_a_Tomcat_server"></a>Create a Tomcat server</h4>
<ul>
  <li>Go to <span style="font-style: italic;">Server</span> tab. If it
does not exist, add it (<span style="font-style: italic;">Windows &gt;
Show
view &gt; Other &gt; Server &gt; Servers</span>).</li>
  <li>In tab <span style="font-style: italic;">Server</span> click <span
 style="font-style: italic;">Right Button &gt; New &gt; Server.</span></li>
  <li>Select in&nbsp;<span style="font-style: italic;">Server runtime</span>:&nbsp;Apache
Tomcat v5.5.</li>
  <li>Click on&nbsp;<span style="font-style: italic;">Next</span>.</li>
  <li>Add&nbsp;<span style="font-style: italic;">MySchool</span> to <span
 style="font-style: italic;">Configured projects</span>.</li>
  <li>Click on&nbsp;<span style="font-style: italic;">Finish</span>.</li>
</ul>
<h4><a name="Define_your_data_sources"></a>Define your data sources</h4>
Now you have in your workspace a project named&nbsp;<span
 style="font-style: italic;">Servers</span>. Inside this
project you have a folder named&nbsp;<span style="font-style: italic;">Tomcat
v5.5 Server @
localhost-config</span>. Put there a file named <span
 style="font-family: monospace;">context.xml</span> with the next
content:<br>
<span style="font-family: monospace;">&lt;!-- The contents of this file
will be loaded for each web
application --&gt;</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&lt;Context&gt;</span><br
 style="font-family: monospace;">
<br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; &lt;!--
Default set of monitored resources --&gt;</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;
&lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;</span><br
 style="font-family: monospace;">
<br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; &lt;!--
Uncomment this to disable session
persistence across Tomcat restarts --&gt;</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; &lt;Manager
pathname="" /&gt;</span><br style="font-family: monospace;">
<br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; &lt;Resource
name="jdbc/OpenXavaDS" auth="Container"
type="javax.sql.DataSource"</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
maxActive="20" maxIdle="5"
maxWait="10000"</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
username="sa" password=""
driverClassName="org.hsqldb.jdbcDriver"</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
url="jdbc:hsqldb:file:</span><span
 style="font-weight: bold; font-family: monospace; color: rgb(51, 51, 255);">/java/openxava-2.1</span><span
 style="font-family: monospace;">/jetspeed-2.0/data/openxava-db"/&gt;</span><br
 style="font-family: monospace;">
<br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; &lt;Resource
name="jdbc/MySchoolDS" auth="Container"
type="javax.sql.DataSource"</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
maxActive="20" maxIdle="5"
maxWait="10000"</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
username="sa" password=""
driverClassName="org.hsqldb.jdbcDriver"</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
url="jdbc:hsqldb:file:</span><span
 style="font-weight: bold; font-family: monospace; color: rgb(51, 102, 255);">/java/openxava-2.1</span><span
 style="font-family: monospace;">/jetspeed-2.0/data/my-school-db"/&gt;</span><br
 style="font-family: monospace;">
<br style="font-family: monospace;">
<span style="font-family: monospace;">&lt;/Context&gt;</span><br
 style="font-family: monospace;">
<br>
Remember to change <span style="color: rgb(51, 51, 255);">/java/openxava-2.1</span>
by the path where your have OpenXava installed.
<h4><a name="Start_the_server_and_test_your"></a>Start the server and
test your application</h4>
<ul>
  <li>Stop your OpenXava Portal&nbsp;(<span
 style="font-family: monospace;">stop-portal.sh/.bat</span>) if it's
started.</li>
  <li>Go to <span style="font-style: italic;">Server</span> tab.</li>
  <li>Click on <span style="font-style: italic;">Right Button on
Tomcat v5.5 Server &gt; Start</span></li>
  <li>Wait until Tomcat is started.</li>
  <li>Open an internet browser and go to <a
 href="http://localhost:8080/MySchool/xava/module.jsp?application=MySchool&amp;module=Teachers">http://localhost:8080/MySchool/xava/module.jsp?application=MySchool&amp;module=Teachers</a>.</li>
</ul>
<h4><a name="Developing_using_WTP"></a>Developing using WTP</h4>
After the above steps if you change Java code then you only need to
click on <span style="font-style: italic;">Build
All</span> (or <span style="font-style: italic;">Ctrl-B</span>) and go
to your browser to see your updated
application. If you touch some XML file you need to execute the <span
 style="font-style: italic;">rebuild</span> ant target, refresh your
project and go to the browser to see the result.<br>
<br>
Furthermore, you can start your Tomcat in debug mode and
using the Eclipse debugger.<br>
