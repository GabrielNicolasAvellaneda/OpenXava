&Eacute;sta es una&nbsp;gu&iacute;a para configurar WTP para ejecutar y
depurar aplicaciones OpenXava dentro de Eclipse.<br>
Eclipse Web Tool Platform (<a href="http://www.eclipse.org/webtools/">WTP</a>)
nos ayuda a desarrollar aplicaciones J2EE con Eclipse.<br>
En el caso de OpenXava podemos usar WTP para arrancar el Tomcat (o tu
servidor de aplicaciones preferido) dentro de Eclipse, de esta forma
podemos ver los efecto de los camibos sin redesplegar y tambi&eacute;n
podemos depurar.<br>
Todas las aplicaciones OpenXava creadas desde OpenXavaPlantilla son
compatibles con WTP.<br>
Este documento nos gu&iacute;a para poder ejecutar la aplicaci&oacute;n
<span style="font-style: italic;">MiEscuela</span>, que viene con
OpenXava, usando WTP.<br>
<b><i>&iexcl;Importante!</i></b> Antes de empezar con este tutorial es
importante <b><i>refrescar</i></b> todos los proyectos del <b><i>workspace</i></b>
en Eclipse
(seleccionando todos los proyectos y pulsando F5).<br>
Hemos de seguir los siguientes pasos:<br>
<ul>
  <li><a href="portal/wtp.psml#Add_Tomcat_to_your_Eclipse">A&ntilde;adir&nbsp;Tomcat
a
nuestro&nbsp;Eclipse.</a></li>
  <li><a href="portal/wtp.psml#Create_a_Tomcat_server">Crear un
servidor Tomcat.</a></li>
  <li><a href="portal/wtp.psml#Define_your_data_sources">Definir las
fuentes de datos.</a></li>
  <li><a href="portal/wtp.psml#Configure_your_OpenXava_application">Configurar
nuestra
aplicaci&oacute;n
OpenXava.</a></li>
  <li><a href="portal/wtp.psml#Start_the_server_and_test_your">Arrancar
el&nbsp;servidor y probar la aplicaci&oacute;n.</a></li>
  <li><a href="portal/wtp.psml#Developing_using_WTP">Desarrollando con
WTP.</a></li>
</ul>
<h4><a name="Add_Tomcat_to_your_Eclipse"></a>A&ntilde;adir Tomcat a
nuestro Eclipse</h4>
<ul>
  <li>Ve a <span style="font-style: italic;">Windows &gt; Preferences
&gt; Server &gt; Installed
Runtimes</span>.</li>
  <li>Pulsa en&nbsp;<span style="font-style: italic;">Add</span>.</li>
  <li>Escoge <span style="font-style: italic;">Apache &gt; Apache
Tomcat 5.5</span>.</li>
  <li>Pulsa en&nbsp;<span style="font-style: italic;">Next</span>.</li>
  <li>Rellena:</li>
  <ul>
    <li><span style="font-style: italic;">Name</span>: <span
 style="font-family: monospace;">Apache Tomcat v5.5</span></li>
    <li><span style="font-style: italic;">Tomcat installation directory</span>:
La ruta de tu Tomcat (puedes usar el Tomcat que viene con OpenXava en
la carpeta <span style="font-family: monospace;">openxava-2.0.4/jetspeed-2.0</span>)</li>
    <li><span style="font-style: italic;">JRE</span>: Escoge un Java 5.</li>
  </ul>
  <li>Pulsa en&nbsp;<span style="font-style: italic;">Finish</span>.</li>
  <li>Pulsa en <span style="font-style: italic;">OK</span> en <span
 style="font-style: italic;">Preferences Dialog</span> para cerrarlo.</li>
</ul>
<span style="font-weight: bold; font-style: italic;">&iexcl;Advertencia!</span>
Si no usas el Tomcat incluido en&nbsp;OpenXava tienes que copiar&nbsp;<span
 style="font-style: italic; font-weight: bold;">jta.jar</span> y <span
 style="font-style: italic; font-weight: bold;">ejb.jar</span> de
openxava-x.x.x/jetspeed-2.0/common/lib a la carpeta <span
 style="font-style: italic; font-weight: bold;">common/lib</span> de tu
Tomcat.
<h4><a name="Create_a_Tomcat_server"></a>Crear un servidor Tomcat</h4>
<ul>
  <li>Ve a la pesta&ntilde;a <span style="font-style: italic;">Server</span>.
Si no existe, a&ntilde;&aacute;dela (<span style="font-style: italic;">Windows
&gt;
Show
view &gt; Other &gt; Server &gt; Servers</span>).</li>
  <li>En la pesta&ntilde;a <span style="font-style: italic;">Server</span>
pulsa&nbsp;<span style="font-style: italic;">Bot&oacute;n Derecho &gt;
New &gt; Server.</span></li>
  <li>Selecciona en&nbsp;<span style="font-style: italic;">Server
runtime</span>:&nbsp;Apache
Tomcat v5.5.</li>
  <li>Pulsa en&nbsp;<span style="font-style: italic;">Next</span>.</li>
  <li>A&ntilde;ade&nbsp;<span style="font-style: italic;">MiEscuela</span>
a <span style="font-style: italic;">Configured projects</span>.</li>
  <li>Pulsa en&nbsp;<span style="font-style: italic;">Finish</span>.</li>
</ul>
<h4><a name="Define_your_data_sources"></a>Definir las fuentes de datos</h4>
Ahora tenemos en nuestro workspace un proyecto llamado&nbsp;<span
 style="font-style: italic;">Servers</span>. Dentro de este proyecto
tenemos una carpeta llamada&nbsp;<span style="font-style: italic;">Tomcat
v5.5 Server @
localhost-config</span>. Pon ah&iacute; un archivo llamado <span
 style="font-family: monospace;">context.xml</span> con el siguiente
contenido:<br>
<br>
<span style="font-family: monospace;">&lt;!-- The contents of this file
will be loaded for each web
application --&gt;</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&lt;Context&gt;</span><br
 style="font-family: monospace;">
<br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; &lt;!--
Default set of monitored resources --&gt;</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;
&lt;WatchedResource&gt;WEB-INF/web.xml&lt;/WatchedResource&gt;</span><br
 style="font-family: monospace;">
<br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; &lt;!--
Uncomment this to disable session
persistence across Tomcat restarts --&gt;</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; &lt;Manager
pathname="" /&gt;</span><br style="font-family: monospace;">
<br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; &lt;Resource
name="jdbc/OpenXavaDS" auth="Container"
type="javax.sql.DataSource"</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
maxActive="20" maxIdle="5"
maxWait="10000"</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
username="sa" password=""
driverClassName="org.hsqldb.jdbcDriver"</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
url="jdbc:hsqldb:file:</span><span
 style="font-weight: bold; font-family: monospace; color: rgb(51, 51, 255);">/java/openxava-2.0</span><span
 style="font-family: monospace;">/jetspeed-2.0/data/openxava-db"/&gt;</span><br
 style="font-family: monospace;">
<br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp; &lt;Resource
name="jdbc/MySchoolDS" auth="Container"
type="javax.sql.DataSource"</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
maxActive="20" maxIdle="5"
maxWait="10000"</span><br style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
username="sa" password=""
driverClassName="org.hsqldb.jdbcDriver"</span><br
 style="font-family: monospace;">
<span style="font-family: monospace;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
url="jdbc:hsqldb:file:</span><span
 style="font-weight: bold; font-family: monospace; color: rgb(51, 102, 255);">/java/openxava-2.0</span><span
 style="font-family: monospace;">/jetspeed-2.0/data/my-school-db"/&gt;</span><br
 style="font-family: monospace;">
<br style="font-family: monospace;">
<span style="font-family: monospace;">&lt;/Context&gt;</span><br
 style="font-family: monospace;">
<br>
Hemos de cambiar <span style="color: rgb(51, 51, 255);">/java/openxava-2.0</span>
por la ruta donde tengamos el OpenXava instalado.
<h4><a name="Configure_your_OpenXava_application"></a>Configurar
nuestra aplicaci&oacute;n&nbsp;OpenXava</h4>
<ul>
  <li>Pulsa en&nbsp;<span style="font-style: italic;">Bot&oacute;n
Derecho</span> sobre el&nbsp;proyecto (en este caso sobre <span
 style="font-style: italic;">MiEscuela</span>) <span
 style="font-style: italic;">&gt; Properties &gt; Builders</span>.</li>
  <li>Marca <span style="font-style: italic;">MiEscuela.wtpBuild</span>.</li>
  <li>Pulsa en&nbsp;<span style="font-style: italic;">OK</span>.</li>
  <li>Pulsa en <span style="font-style: italic;">Build All</span>.</li>
  <li>Ejecuta la tarea ant <span style="font-style: italic;">reconstruir</span>
y refresca (F5) tu proyecto.</li>
</ul>
<h4><a name="Start_the_server_and_test_your"></a>Arrancar el servidor y
probar la aplicaci&oacute;n</h4>
<ul>
  <li>Para el portal Jetspeed si lo tienes arrancado.</li>
  <li>Ve a <span style="font-style: italic;">Server</span> tab.</li>
  <li>Pulsa en&nbsp;<span style="font-style: italic;">Bot&oacute;n
Derecho en
Tomcat v5.5 Server &gt; Start</span></li>
  <li>Espera hasta que el Tomcat arranque.</li>
  <li>Abre un navegador de internet y ve a <a
 href="http://localhost:8080/MiEscuela/xava/module.jsp?application=MiEscuela&amp;module=Profesores">http://localhost:8080/MiEscuela/xava/module.jsp?application=MiEscuela&amp;module=Profesores</a>.</li>
</ul>
<h4><a name="Developing_using_WTP"></a>Desarrollando con WTP</h4>
Despu&eacute;s de seguir estos pasos ya solo necesitamos tocar nuestro
c&oacute;digo, pulsa en <span style="font-style: italic;">Build
All</span> (o <span style="font-style: italic;">Ctrl-B</span>) e ir a
ver en nuestro navegador para ver nuestra aplicaci&oacute;n
actualizada. Adem&aacute;s, podemos arrancar el Tomcat en modo
depuraci&oacute;n y as&iacute; usar el depurador del Eclipse.<br>
