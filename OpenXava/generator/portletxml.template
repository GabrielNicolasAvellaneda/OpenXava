<?xml version="1.0" encoding="UTF-8"?>
#declare import="java.util.*"#
#declare import="org.openxava.application.meta.*"#
#declare import="org.openxava.generators.Generators"#
#declare import="org.openxava.util.*"#

<!-- Generated by OpenXava: #(new Date())# -->

# 
String applicationName = properties.getProperty("arg3");
MetaApplication application = MetaApplications.getMetaApplication(applicationName);

Collection locales = Generators.getAvailableLocales("../" + applicationName + "/i18n");
# 

<portlet-app id="#(applicationName)#"
	xmlns="http://java.sun.com/xml/ns/portlet/portlet-app_1_0.xsd" 
	version="1.0" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="http://java.sun.com/xml/ns/portlet/portlet-app_1_0.xsd http://java.sun.com/xml/ns/portlet/portlet-app_1_0.xsd"
>

# 
for (Iterator it=application.getMetaModules().iterator(); it.hasNext(); ) {
	MetaModule module = (MetaModule) it.next();
# 
	<portlet id="#(Strings.toCharSet(module.getName(), "UTF-8"))#">
		<description>#(Strings.toCharSet(application.getLabel(), "UTF-8"))# - #(Strings.toCharSet(module.getDescription(), "UTF-8"))#</description>
    # for (Iterator itLocales=locales.iterator(); itLocales.hasNext(); ) { 
    	Locale locale = (Locale) itLocales.next();
    #    
		<description xml:lang="#(locale)#">#(Strings.toCharSet(application.getLabel(locale), "UTF-8"))# - #(Strings.toCharSet(module.getDescription(locale), "UTF-8"))#</description>
	# } #       
		<portlet-name>#(Strings.toCharSet(module.getName(), "UTF-8"))#</portlet-name>
		<display-name>#(Strings.toCharSet(application.getLabel(), "UTF-8"))# - #(Strings.toCharSet(module.getLabel(), "UTF-8"))#</display-name>
    # for (Iterator itLocales=locales.iterator(); itLocales.hasNext(); ) { 
    	Locale locale = (Locale) itLocales.next();
    #    
		<display-name xml:lang="#(locale)#">#(Strings.toCharSet(application.getLabel(locale), "UTF-8"))# - #(Strings.toCharSet(module.getLabel(locale), "UTF-8"))#</display-name>
    # } # 
    # if (module.isDoc()) { # 
		<portlet-class>org.openxava.web.portlets.HtmlPortlet</portlet-class>
		<init-param>
			<name>Page</name>
			<value>#(module.getDocURL())#</value>
		</init-param>
		<init-param>
			<name>Languages</name>
			<value>#(module.getDocLanguages())#</value>
		</init-param>		
	# } else { # 
		<portlet-class>org.openxava.web.portlets.XavaPortlet</portlet-class>
		<init-param>
			<name>Application</name>
			<value>#(Strings.toCharSet(applicationName, "UTF-8"))#</value>
		</init-param>
		<init-param>
			<name>Module</name>
			<value>#(Strings.toCharSet(module.getName(), "UTF-8"))#</value>
		</init-param>			
	# } # 
		<expiration-cache>-1</expiration-cache>
		<supports>
			<mime-type>text/html</mime-type>
			<portlet-mode>VIEW</portlet-mode>
		</supports>
    # for (Iterator itLocales=locales.iterator(); itLocales.hasNext(); ) { #
		<supported-locale>#(itLocales.next())#</supported-locale>
    # } # 
    	<resource-bundle>portlets/#(Strings.toCharSet(module.getName(), "UTF-8"))#</resource-bundle>
	</portlet>
# 
}
#   
	
</portlet-app>
