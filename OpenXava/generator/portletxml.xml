<?xml version="1.0"?>
<tl>&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
<declare import="java.util.*"/>
<declare import="org.openxava.application.meta.*"/>
<declare import="org.openxava.generators.Generators"/>

&lt;!-- Generated by OpenXava: <expr>new Date()</expr> --&gt;

<java>
String applicationName = properties.getProperty("arg3");
MetaApplication application = MetaApplications.getMetaApplication(applicationName);

Collection locales = Generators.getAvailableLocales("../" + applicationName + "/i18n");
</java> 

&lt;portlet-app id="<expr>applicationName</expr>" version="1.0"&gt;

<java>
for (Iterator it=application.getMetaModules().iterator(); it.hasNext(); ) {
	MetaModule module = (MetaModule) it.next();
</java> 

	&lt;portlet id="<expr>module.getName()</expr>"&gt;
		&lt;init-param&gt;
			&lt;name&gt;Application&lt;/name&gt;
			&lt;value&gt;<expr>applicationName</expr>&lt;/value&gt;
		&lt;/init-param&gt;
		&lt;init-param&gt;
			&lt;name&gt;Module&lt;/name&gt;
			&lt;value&gt;<expr>module.getName()</expr>&lt;/value&gt;
		&lt;/init-param&gt;		
		&lt;portlet-name&gt;<expr>module.getName()</expr>&lt;/portlet-name&gt;
		&lt;display-name&gt;<expr>module.getLabel()</expr>&lt;/display-name&gt;
    <java>for (Iterator itLocales=locales.iterator(); itLocales.hasNext(); ) { 
    	Locale locale = (Locale) itLocales.next();
    </java>    
		&lt;display-name xml:lang="<expr>locale</expr>"&gt;<expr>module.getLabel(locale)</expr>&lt;/display-name&gt;
    <java>} </java> 
		&lt;portlet-class&gt;org.openxava.web.portlets.XavaPortlet&lt;/portlet-class&gt;
		&lt;expiration-cache&gt;-1&lt;/expiration-cache&gt;
		&lt;supports&gt;
			&lt;mime-type&gt;text/html&lt;/mime-type&gt;
			&lt;portlet-mode&gt;VIEW&lt;/portlet-mode&gt;
		&lt;/supports&gt;
    <java>for (Iterator itLocales=locales.iterator(); itLocales.hasNext(); ) { </java>
		&lt;supported-locale&gt;<expr>itLocales.next()</expr>&lt;/supported-locale&gt;
    <java>} </java> 
		&lt;portlet-info&gt;
			&lt;title&gt;<expr>module.getDescription()</expr>&lt;/title&gt;
    <java>for (Iterator itLocales=locales.iterator(); itLocales.hasNext(); ) { 
    	Locale locale = (Locale) itLocales.next();
    </java>    
			&lt;title xml:lang="<expr>locale</expr>"&gt;<expr>module.getDescription(locale)</expr>&lt;/title&gt;
	<java>} </java>       
			&lt;short-title&gt;<expr>module.getLabel()</expr>&lt;/short-title&gt;
    <java>for (Iterator itLocales=locales.iterator(); itLocales.hasNext(); ) { 
    	Locale locale = (Locale) itLocales.next();
    </java>    	
			&lt;short-title xml:lang="<expr>locale</expr>"&gt;<expr>module.getLabel(locale)</expr>&lt;/short-title&gt;
	<java>} </java>      
		&lt;/portlet-info&gt;
	&lt;/portlet&gt;
<java>
}
</java>   
	
&lt;/portlet-app&gt;
</tl>